<div class="modern-modal-header">
  <div class="header-decoration">
    <div class="decoration-circle circle-1"></div>
    <div class="decoration-circle circle-2"></div>
    <div class="decoration-line"></div>
  </div>
  
  <div class="header-content">
    <div class="header-icon">
      <i class="fas fa-paper-plane"></i>
    </div>
    <div class="header-text">
      <h4 class="modal-title">Оставить заявку</h4>
      <p class="modal-subtitle">Мы свяжемся с вами в удобном мессенджере</p>
    </div>
  </div>
  
  <button
    type="button"
    class="modern-close-btn"
    aria-label="Закрыть"
    (click)="activeModal.hide()"
  >
    <i class="fas fa-times"></i>
  </button>
</div>

<div class="modern-modal-body">
  <form class="modern-contact-form" (ngSubmit)="submitContactForm()">
    <!-- Выбор мессенджера -->
    <div class="form-section">
      <div class="section-header">
        <i class="fas fa-comments"></i>
        <label class="section-label">Выберите мессенджер</label>
      </div>
      <div class="modern-messenger-selector">
        <div class="messenger-card" [class.active]="selectedMessenger === 'telegram'">
          <input type="radio" id="telegram" name="messenger" value="telegram"
                 [(ngModel)]="selectedMessenger" required>
          <label for="telegram" class="messenger-label">
            <div class="messenger-icon">
              <i class="fab fa-telegram-plane"></i>
            </div>
            <div class="messenger-info">
              <span class="messenger-name">Telegram</span>
              <span class="messenger-desc">Быстро и удобно</span>
            </div>
            <div class="messenger-check">
              <i class="fas fa-check"></i>
            </div>
          </label>
        </div>
      </div>
    </div>

    <!-- Поля ввода -->
    <div class="form-section">
      <div class="section-header">
        <i class="fas fa-user"></i>
        <label class="section-label">Контактная информация</label>
      </div>
      
      <div class="form-grid">
        <div class="form-group">
          <div class="input-wrapper">
            <i class="input-icon fas fa-user"></i>
            <input type="text" id="firstName" class="modern-input"
                   [(ngModel)]="contactData.firstName" name="firstName" 
                   required autocomplete="given-name" 
                   placeholder="Введите ваше имя"
                   maxlength="50">
            <div class="input-focus-line"></div>
          </div>
          <label for="firstName" class="floating-label">Имя *</label>
        </div>

        <div class="form-group">
          <div class="input-wrapper">
            <i class="input-icon fas fa-phone"></i>
            <input type="tel" id="phone" class="modern-input"
                   [(ngModel)]="contactData.phone" name="phone" 
                   required autocomplete="tel"
                   placeholder="+7 (___) ___-__-__"
                   pattern="[\+]?[0-9\s\-\(\)]+"
                   maxlength="20">
            <div class="input-focus-line"></div>
          </div>
          <label for="phone" class="floating-label">Номер телефона *</label>
        </div>
      </div>
    </div>

    <!-- Комментарий -->
    <div class="form-section">
      <div class="section-header">
        <i class="fas fa-comment-dots"></i>
        <label class="section-label">Дополнительная информация</label>
      </div>
      
      <div class="form-group">
        <div class="textarea-wrapper">
          <i class="input-icon fas fa-comment"></i>
          <textarea id="message" class="modern-textarea" rows="4"
                    [(ngModel)]="contactData.message" name="message"
                    placeholder="Укажите удобное время для связи или дополнительные пожелания"
                    maxlength="500"
                    aria-describedby="message-help"></textarea>
          <div class="input-focus-line"></div>
        </div>
        <label for="message" class="floating-label">Комментарий (необязательно)</label>
        <div class="char-counter">
          <span class="char-count">{{ (contactData.message || '').length }}</span>
          <span class="char-max">/ 500</span>
        </div>
      </div>
    </div>
  </form>
</div>

<div class="modern-modal-footer">
  <div class="footer-info">
    <i class="fas fa-shield-alt"></i>
    <span>Ваши данные защищены и не передаются третьим лицам</span>
  </div>
  
  <div class="footer-actions">
    <button type="button" class="modern-btn secondary" (click)="activeModal.hide()">
      <i class="fas fa-times"></i>
      <span>Отменить</span>
    </button>
    <button type="submit" class="modern-btn primary" (click)="submitContactForm()" 
            [disabled]="!selectedMessenger || !contactData.firstName || !contactData.phone">
      <i class="fas fa-paper-plane"></i>
      <span>Отправить заявку</span>
      <div class="btn-loading" *ngIf="isSubmitting">
        <i class="fas fa-spinner fa-spin"></i>
      </div>
    </button>
  </div>
</div>
